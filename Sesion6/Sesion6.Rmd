---
title: "SesiÃ³n 6: Factores y gramatica de ggplot2"
output: html_document
---

# ðŸ”¢ Vectores nombrados

En R, un **vector nombrado** te permite asignar un nombre a cada elemento del vector. Esto hace que el vector sea mÃ¡s legible y te permite acceder a los valores por su nombre.

```{r}
# Crear un vector normal
edades <- c(9, 8, 10)

# Agregar nombres a cada valor
names(edades) <- c("Ana", "Luis", "SofÃ­a")

# Mostrar el vector nombrado
edades
```

TambiÃ©n puedes crear un vector nombrado desde el inicio:

```{r}
edades <- c(Ana = 9, Luis = 8, SofÃ­a = 10)
edades
```

## Acceder a elementos por nombre

```{r}
edades["Ana"]
edades[c("Luis", "SofÃ­a")]
```

## Modificar elementos por nombre

```{r}
edades["Luis"] <- 9
edades
```

---

# ðŸ§­ Factores

Los **factores** son vectores especiales que se usan para representar **categorÃ­as** (variables cualitativas), como sexo, tipo de tratamiento, o niveles educativos.

```{r}
# Vector de texto
sexo <- c("Mujer", "Hombre", "Mujer", "Mujer", "Hombre")

# Convertirlo en factor
sexo_factor <- factor(sexo)
sexo_factor
```

Esto le asigna internamente un nÃºmero a cada categorÃ­a:

```{r}
as.numeric(sexo_factor)
levels(sexo_factor)
```

## Especificar niveles y su orden

Puedes controlar el orden de los niveles:

```{r}
niveles <- c("Bajo", "Medio", "Alto")
respuesta <- c("Medio", "Alto", "Bajo", "Bajo", "Alto")
respuesta_factor <- factor(respuesta, levels = niveles, ordered = TRUE)
respuesta_factor
```

## Comparaciones entre factores ordenados

```{r}
# Bajo es mas pequeÃ±o que Medio
respuesta_factor[1] < respuesta_factor[2]  # TRUE
```
---

# ðŸŽ¨ IntroducciÃ³n a la gramÃ¡tica de `ggplot2`

La gramÃ¡tica de `ggplot2` se basa en **capas** que se agregan secuencialmente para construir una visualizaciÃ³n. Cada capa tiene una funciÃ³n especÃ­fica:

---

## ðŸ§± Capa 1: Datos y mapeo estÃ©tico (`ggplot(aes())`)

- `data =`: se indica el **data frame** que contiene los datos.
- `aes()`: define las **columnas** que se usarÃ¡n para los ejes y atributos estÃ©ticos.

```{r}
library(ggplot2)

# Primera capa: datos y asignaciÃ³n de ejes
ggplot(data = mtcars, aes(x = gear, y = mpg))
```

AquÃ­ no se ve nada todavÃ­a porque no hemos definido el tipo de grÃ¡fico.

---

## ðŸ–¼ Capa 2: Tipo de grÃ¡fico (geom)

La siguiente capa define **cÃ³mo** se mostrarÃ¡n los datos.

### Tipos comunes:

| FunciÃ³n        | DescripciÃ³n                   |
|----------------|-------------------------------|
| `geom_col()`   | GrÃ¡fico de barras             |
| `geom_point()` | DispersiÃ³n o puntos           |
| `geom_boxplot()`| Boxplot                      |
| `geom_tile()`  | Heatmap                       |
| `geom_density()` | Densidad                    |

```{r}
# Ejemplo: grÃ¡fico de barras
ggplot(data = mtcars, aes(x = factor(gear), y = mpg)) +
  geom_col()
```

```{r}
# Ejemplo: grÃ¡fico de dispersiÃ³n
ggplot(data = mtcars, aes(x = hp, y = mpg)) +
  geom_point()
```

```{r}
# Ejemplo: boxplot por nÃºmero de cilindros
ggplot(data = mtcars, aes(x = factor(cyl), y = mpg)) +
  geom_boxplot()
```

---

## ðŸŽ¨ Capa 3: EstÃ©tica y personalizaciÃ³n

La estÃ©tica del grÃ¡fico se ajusta con `theme()`, `xlab()`, `ylab()`, `ggtitle()`, etc.

La funciÃ³n `theme()` en `ggplot2` permite alterar de manera especÃ­fica los **elementos visuales** del grÃ¡fico.  
Una parte muy comÃºn de modificar es el **texto de los ejes**, conocido como `axis.text`.

Este texto incluye las etiquetas numÃ©ricas o categÃ³ricas que se colocan automÃ¡ticamente en los ejes `x` e `y` para representar los valores correspondientes.

---

### âŒ Eliminar completamente el texto de los ejes

```{r}
library(ggplot2)

ggplot(data = mtcars, aes(x = factor(cyl), y = mpg)) +
  geom_boxplot() +
  theme(axis.text = element_blank())
```

ðŸ”Ž En este caso, se usa `axis.text = element_blank()` para **eliminar por completo** las etiquetas de ambos ejes.  
Esto puede ser Ãºtil si el grÃ¡fico ya es suficientemente claro por sÃ­ solo o si queremos ahorrar espacio visual.

---

### ðŸŽ¯ Modificar solo el texto del eje X

```{r}
ggplot(data = mtcars, aes(x = factor(cyl), y = mpg)) +
  geom_boxplot() +
  theme(
    axis.text.x = element_text(size = 14, face = "bold", angle = 0)
  )
```

- `axis.text.x`: se refiere **solo** al texto del eje horizontal (X).
- `size = 14`: aumenta el tamaÃ±o del texto (puedes usar tambiÃ©n `size = rel(1.5)`).
- `face = "bold"`: cambia el estilo del texto (otras opciones: `"italic"`, `"plain"`).
- `angle = 0`: mantiene el texto horizontal.

---

### ðŸŽ¯ Modificar solo el texto del eje Y

```{r}
ggplot(data = mtcars, aes(x = factor(cyl), y = mpg)) +
  geom_boxplot() +
  theme(
    axis.text.y = element_text(size = 10, face = "italic")
  )
```

- AquÃ­ se personaliza el texto del **eje vertical (Y)**.
- Se reduce el tamaÃ±o (`size = 10`) y se cambia a cursiva (`face = "italic"`).

---

### ðŸ§© Nota importante:

- Puedes modificar **`axis.text.x` y `axis.text.y`** por separado o al mismo tiempo.
- Si usas `axis.text` sin `.x` o `.y`, se aplica el cambio **a ambos ejes simultÃ¡neamente**.


## ðŸŽ¨ Modificando `axis.title` y `axis.ticks` con `theme()`

AdemÃ¡s de `axis.text`, en `ggplot2` tambiÃ©n puedes modificar:

- **`axis.title`**: los tÃ­tulos de los ejes (por ejemplo, "Eje X", "Eje Y").
- **`axis.ticks`**: las pequeÃ±as marcas que indican las posiciones de los valores en los ejes.

Estas capas pueden ayudarte a personalizar la visualizaciÃ³n para hacerla mÃ¡s clara o mÃ¡s estÃ©tica.

---

### ðŸ–Šï¸ Modificar el tÃ­tulo del eje X (`axis.title.x`)

```{r}
library(ggplot2)

ggplot(data = mtcars, aes(x = factor(cyl), y = mpg)) +
  geom_boxplot() +
  theme(axis.title.x = element_text(size = 16, face = "bold", color = "blue")) +
  xlab("NÃºmero de cilindros")
```

âœ… ExplicaciÃ³n:

- `axis.title.x`: modifica **solo el tÃ­tulo del eje X**.
- `size`: controla el tamaÃ±o del texto.
- `face`: estilo (`"bold"`, `"italic"`, etc.).
- `color`: permite definir un color.

---

### ðŸ–Šï¸ Modificar el tÃ­tulo del eje Y (`axis.title.y`)

```{r}
ggplot(data = mtcars, aes(x = factor(cyl), y = mpg)) +
  geom_boxplot() +
  theme(axis.title.y = element_text(size = rel(1.5), color = "darkgreen")) +
  ylab("Millas por galÃ³n")
```

âœ… AquÃ­ usamos `rel(1.5)` para escalar el tamaÃ±o y un color especÃ­fico.

---

### âŒ Eliminar los tÃ­tulos de ambos ejes

```{r}
ggplot(data = mtcars, aes(x = factor(cyl), y = mpg)) +
  geom_boxplot() +
  theme(
    axis.title.x = element_blank(),
    axis.title.y = element_blank()
  )
```

ðŸ”Ž Ãštil cuando los tÃ­tulos no aportan informaciÃ³n adicional.

---

### ðŸŽ¯ Eliminar las marcas (`axis.ticks`)

```{r}
ggplot(data = mtcars, aes(x = factor(cyl), y = mpg)) +
  geom_boxplot() +
  theme(axis.ticks = element_blank())
```

âœ… Esto elimina todas las pequeÃ±as lÃ­neas (ticks) de ambos ejes.

---

### ðŸ”§ Modificar solo las marcas del eje X o Y

```{r}
# Solo eje X
ggplot(data = mtcars, aes(x = factor(cyl), y = mpg)) +
  geom_boxplot() +
  theme(axis.ticks.x = element_blank())

# Solo eje Y
ggplot(data = mtcars, aes(x = factor(cyl), y = mpg)) +
  geom_boxplot() +
  theme(axis.ticks.y = element_blank())
```

---

## ðŸ“Œ Resumen: PersonalizaciÃ³n de ejes con `theme()` en `ggplot2`

En esta secciÃ³n exploramos cÃ³mo personalizar los elementos visuales de un grÃ¡fico utilizando la funciÃ³n `theme()` de `ggplot2`. Esta herramienta es fundamental para adaptar tus visualizaciones a distintas audiencias y hacerlas mÃ¡s claras, impactantes y profesionales.

### âœ… Elementos que puedes modificar:

1. **TÃ­tulos de ejes (`axis.title`)**  
   - Se refiere a los tÃ­tulos que describen lo que representa cada eje.  
   - Puedes modificar su tamaÃ±o, color, estilo (`"bold"`, `"italic"`) y alineaciÃ³n.  
   - Se puede aplicar por separado con `axis.title.x` o `axis.title.y`.

2. **Texto de ejes (`axis.text`)**  
   - Representa los valores o categorÃ­as que se muestran en los ejes.  
   - Puedes personalizar su tamaÃ±o, orientaciÃ³n (con `angle`), estilo de letra y visibilidad.  
   - Se usa comÃºnmente para mejorar la legibilidad o resaltar grupos importantes.  
   - Ejemplos Ãºtiles incluyen rotar los textos del eje X o hacer mÃ¡s pequeÃ±o el texto del eje Y si hay muchas marcas.

3. **Marcas en los ejes (`axis.ticks`)**  
   - Son las pequeÃ±as lÃ­neas que indican la ubicaciÃ³n de los valores en los ejes.  
   - Puedes eliminarlas con `element_blank()` si no son necesarias o recargan el diseÃ±o.  
   - TambiÃ©n puedes desactivarlas individualmente (`axis.ticks.x`, `axis.ticks.y`).

---

### ðŸŽ¯ Buenas prÃ¡cticas:

- Elige los elementos a modificar segÃºn la necesidad del grÃ¡fico: claridad, espacio o Ã©nfasis.
- Usa `element_text()` para aplicar estilos personalizados.
- Usa `element_blank()` cuando quieras eliminar visualmente elementos que no aporten informaciÃ³n.
- Puedes aplicar estilos globales o dirigirte a un eje en especÃ­fico usando `.x` o `.y`.

Este nivel de control permite adaptar cada grÃ¡fico a su propÃ³sito comunicativo, facilitando la interpretaciÃ³n de los datos por parte del lector.


## IlustraciÃ³n del uso de `theme()` en ggplot2

La siguiente imagen muestra un grÃ¡fico con **anotaciones visuales** que ayudan a identificar claramente quÃ© elementos pueden modificarse usando `theme()`.

- ðŸ”µ En azul: las marcas o "ticks" (`axis.ticks`)
- ðŸ”´ En rojo: el texto de los ejes (`axis.text`)
- ðŸŸ¢ En verde: los tÃ­tulos de los ejes (`axis.title`)
- TambiÃ©n se muestra cÃ³mo se estructuran las capas del grÃ¡fico y su sintaxis bÃ¡sica

![Esquema sobre ggplot2 y theme()](ggplot2_theme_anotado.png)